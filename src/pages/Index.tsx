
import { useState, useEffect } from 'react';
import Navbar from '@/components/Navbar';
import Sidebar from '@/components/Sidebar';
import Dashboard from '@/components/Dashboard';
import NetworkInterfaces from '@/components/NetworkInterfaces';
import Connections from '@/components/Connections';
import Processes from '@/components/Processes';
import Logs from '@/components/Logs';
import { NetworkData } from '@/types/network';
import { Loader2 } from 'lucide-react';

// Import sample data - in a real app, this would come from an API
const sampleData: NetworkData = {
  "hostname": "nimesh-ThinkCentre-neo-50t-Gen-3",
  "timestamp": "2025-04-09T06:39:28Z",
  "network_config": {
    "interfaces": "1: lo: <LOOPBACK,PROMISC,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host noprefixroute \n       valid_lft forever preferred_lft forever\n2: eno2: <BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether e0:be:03:93:e1:96 brd ff:ff:ff:ff:ff:ff\n    altname enp0s31f6\n    inet 10.10.100.71/16 brd 10.10.255.255 scope global noprefixroute eno2\n       valid_lft forever preferred_lft forever\n    inet6 fe80::b7fd:a2d9:42a3:879d/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever\n3: wlo1: <BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000\n    link/ether 30:f6:ef:37:e5:6f brd ff:ff:ff:ff:ff:ff\n    altname wlp0s20f3\n    inet 192.168.43.175/24 brd 192.168.43.255 scope global dynamic noprefixroute wlo1\n       valid_lft 2446sec preferred_lft 2446sec\n    inet6 2401:4900:81f1:36ef:2436:1d1e:c31b:a067/64 scope global temporary dynamic \n       valid_lft 600162sec preferred_lft 81259sec\n    inet6 2401:4900:81f1:36ef:6041:934a:d071:3ca6/64 scope global mngtmpaddr noprefixroute \n       valid_lft forever preferred_lft forever\n    inet6 fe80::745:44e6:eca9:2d2/64 scope link noprefixroute \n       valid_lft forever preferred_lft forever",
    "routes": "default via 192.168.43.1 dev wlo1 proto dhcp src 192.168.43.175 metric 600 \n10.10.0.0/16 dev eno2 proto kernel scope link src 10.10.100.71 metric 100 \n192.168.43.0/24 dev wlo1 proto kernel scope link src 192.168.43.175 metric 600",
    "arp_cache": "192.168.43.1 dev wlo1 lladdr 08:97:58:07:fe:56 REACHABLE \n192.168.43.38 dev wlo1 lladdr 30:f6:ef:37:df:57 STALE \n10.10.100.70 dev eno2 lladdr e0:be:03:93:d5:49 STALE \n10.10.100.67 dev eno2 lladdr e0:be:03:93:d2:a2 STALE \nfe80::ec3f:99bd:6731:174f dev eno2 lladdr 00:0c:29:8a:17:0b STALE \nfe80::187d:93ff:fe3a:f790 dev wlo1 FAILED \nfe80::24b5:29ff:fec8:9901 dev wlo1 lladdr 08:97:58:07:fe:56 router STALE \nfe80::4d3:b4ff:fea9:142b dev wlo1 lladdr 08:97:58:07:fe:56 router STALE \nfe80::d0ca:be58:ad47:e254 dev wlo1 lladdr 08:97:58:07:fe:56 router REACHABLE \nfe80::bb92:8f7f:1171:fca3 dev eno2 lladdr 48:df:37:80:37:66 STALE \nfe80::c1d5:66b5:acb4:f84f dev eno2 lladdr 00:50:56:83:e7:3e STALE \nfe80::472:f3ff:fec5:6b12 dev wlo1 lladdr 08:97:58:07:fe:56 router STALE \nfe80::a97:58ff:fe07:fe56 dev wlo1 FAILED \nfe80::34b9:dbff:fe47:9630 dev wlo1 lladdr 08:97:58:07:fe:56 router STALE \nfe80::3e:6cff:fe48:8768 dev wlo1 lladdr 08:97:58:07:fe:56 router REACHABLE \nfe80::902c:d5ff:fea6:4757 dev wlo1 lladdr 08:97:58:07:fe:56 router STALE",
    "vlans": "port              vlan-id\n",
    "wireless_link": "",
    "wireless_stations": ""
  },
  "interface_stats": "Inter-|   Receive                                                |  Transmit\n face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed\n    lo: 56118070  595744    0    0    0     0          0         0 56118070  595744    0    0    0     0       0          0\n  eno2: 88840272  932032    0    0    0     0          0    390302  3815212   16569    0   14    0     0       0          0\n  wlo1: 105330193  125067    0    0    0     0          0         0 33255829   81188    0  183    0     0       0          0",
  "ethtool": {
    "wlo1": "Settings for wlo1:\n\tLink detected: yes",
    "eno2": "Settings for eno2:\n\tSupported ports: [ TP ]\n\tSupported link modes:   10baseT/Half 10baseT/Full\n\t                        100baseT/Half 100baseT/Full\n\t                        1000baseT/Full\n\tSupported pause frame use: Symmetric Receive-only\n\tSupports auto-negotiation: Yes\n\tSupported FEC modes: Not reported\n\tAdvertised link modes:  10baseT/Half 10baseT/Full\n\t                        100baseT/Half 100baseT/Full\n\t                        1000baseT/Full\n\tAdvertised pause frame use: Symmetric Receive-only\n\tAdvertised auto-negotiation: Yes\n\tAdvertised FEC modes: Not reported\n\tLink partner advertised link modes:  10baseT/Half 10baseT/Full\n\t                                     100baseT/Half 100baseT/Full\n\t                                     1000baseT/Full\n\tLink partner advertised pause frame use: No\n\tLink partner advertised auto-negotiation: Yes\n\tLink partner advertised FEC modes: Not reported\n\tSpeed: 1000Mb/s\n\tDuplex: Full\n\tAuto-negotiation: on\n\tPort: Twisted Pair\n\tPHYAD: 1\n\tTransceiver: internal\n\tMDI-X: on (auto)\n\tSupports Wake-on: pumbg\n\tWake-on: g\n        Current message level: 0x00000007 (7)\n                               drv probe link\n\tLink detected: yes"
  },
  "protocol_counters": {
    "snmp": "Ip: Forwarding DefaultTTL InReceives InHdrErrors InAddrErrors ForwDatagrams InUnknownProtos InDiscards InDelivers OutRequests OutDiscards OutNoRoutes ReasmTimeout ReasmReqds ReasmOKs ReasmFails FragOKs FragFails FragCreates OutTransmits\nIp: 1 64 1044606 0 151 1949 0 0 896264 749161 20 704 0 0 0 0 0 0 0 751110\nIcmp: InMsgs InErrors InCsumErrors InDestUnreachs InTimeExcds InParmProbs InSrcQuenchs InRedirects InEchos InEchoReps InTimestamps InTimestampReps InAddrMasks InAddrMaskReps OutMsgs OutErrors OutRateLimitGlobal OutRateLimitHost OutDestUnreachs OutTimeExcds OutParmProbs OutSrcQuenchs OutRedirects OutEchos OutEchoReps OutTimestamps OutTimestampReps OutAddrMasks OutAddrMaskReps\nIcmp: 6928 192 0 6898 0 0 0 0 17 13 0 0 0 0 6947 0 0 41 6917 0 0 0 0 13 17 0 0 0 0\nIcmpMsg: InType0 InType3 InType8 OutType0 OutType3 OutType8\nIcmpMsg: 13 6898 17 17 6917 13\nTcp: RtoAlgorithm RtoMin RtoMax MaxConn ActiveOpens PassiveOpens AttemptFails EstabResets CurrEstab InSegs OutSegs RetransSegs InErrs OutRsts InCsumErrors\nTcp: 1 200 120000 -1 7332 3805 1733 101 12 677653 574888 1428 51 1669 0\nUdp: InDatagrams NoPorts InErrors OutDatagrams RcvbufErrors SndbufErrors InCsumErrors IgnoredMulti MemErrors\nUdp: 258738 5016 0 188987 0 0 0 5552 0\nUdpLite: InDatagrams NoPorts InErrors OutDatagrams RcvbufErrors SndbufErrors InCsumErrors IgnoredMulti MemErrors\nUdpLite: 0 0 0 0 0 0 0 0 0",
    "netstat": "TcpExt: SyncookiesSent SyncookiesRecv SyncookiesFailed EmbryonicRsts PruneCalled RcvPruned OfoPruned OutOfWindowIcmps LockDroppedIcmps ArpFilter TW TWRecycled TWKilled PAWSActive PAWSEstab DelayedACKs DelayedACKLocked DelayedACKLost ListenOverflows ListenDrops TCPHPHits TCPPureAcks TCPHPAcks TCPRenoRecovery TCPSackRecovery TCPSACKReneging TCPSACKReorder TCPRenoReorder TCPTSReorder TCPFullUndo TCPPartialUndo TCPDSACKUndo TCPLossUndo TCPLostRetransmit TCPRenoFailures TCPSackFailures TCPLossFailures TCPFastRetrans TCPSlowStartRetrans TCPTimeouts TCPLossProbes TCPLossProbeRecovery TCPRenoRecoveryFail TCPSackRecoveryFail TCPRcvCollapsed TCPBacklogCoalesce TCPDSACKOldSent TCPDSACKOfoSent TCPDSACKRecv TCPDSACKOfoRecv TCPAbortOnData TCPAbortOnClose TCPAbortOnMemory TCPAbortOnTimeout TCPAbortOnLinger TCPAbortFailed TCPMemoryPressures TCPMemoryPressuresChrono TCPSACKDiscard TCPDSACKIgnoredOld TCPDSACKIgnoredNoUndo TCPSpuriousRTOs TCPMD5NotFound TCPMD5Unexpected TCPMD5Failure TCPSackShifted TCPSackMerged TCPSackShiftFallback TCPBacklogDrop PFMemallocDrop TCPMinTTLDrop TCPDeferAcceptDrop IPReversePathFilter TCPTimeWaitOverflow TCPReqQFullDoCookies TCPReqQFullDrop TCPRetransFail TCPRcvCoalesce TCPOFOQueue TCPOFODrop TCPOFOMerge TCPChallengeACK TCPSYNChallenge TCPFastOpenActive TCPFastOpenActiveFail TCPFastOpenPassive TCPFastOpenPassiveFail TCPFastOpenListenOverflow TCPFastOpenCookieReqd TCPFastOpenBlackhole TCPSpuriousRtxHostQueues BusyPollRxPackets TCPAutoCorking TCPFromZeroWindowAdv TCPToZeroWindowAdv TCPWantZeroWindowAdv TCPSynRetrans TCPOrigDataSent TCPHystartTrainDetect TCPHystartTrainCwnd TCPHystartDelayDetect TCPHystartDelayCwnd TCPACKSkippedSynRecv TCPACKSkippedPAWS TCPACKSkippedSeq TCPACKSkippedFinWait2 TCPACKSkippedTimeWait TCPACKSkippedChallenge TCPWinProbe TCPKeepAlive TCPMTUPFail TCPMTUPSuccess TCPDelivered TCPDeliveredCE TCPAckCompressed TCPZeroWindowDrop TCPRcvQDrop TCPWqueueTooBig TCPFastOpenPassiveAltKey TcpTimeoutRehash TcpDuplicateDataRehash TCPDSACKRecvSegs TCPDSACKIgnoredDubious TCPMigrateReqSuccess TCPMigrateReqFailure TCPPLBRehash TCPAORequired TCPAOBad TCPAOKeyNotFound TCPAOGood TCPAODroppedIcmps\nTcpExt: 0 0 0 0 0 0 0 32 0 0 4367 0 0 0 0 29702 1 381 0 0 251578 20529 328893 0 97 0 129 0 15 12 1 8 29 274 0 4 1 437 31 5557 397 26 0 8 0 1195 381 0 267 3 169 63 0 133 0 1 0 0 2 4 156 3 0 0 0 130 345 452 0 0 0 0 56251 0 0 0 0 59411 22801 0 0 46 51 0 1 0 0 0 0 0 4723 0 1151 0 0 0 428 358284 1 24 27 1075 0 0 2 0 0 5 0 1658 0 0 363804 0 14786 0 0 0 0 5517 8 267 3 0 0 0 0 0 0 0 0\nIpExt: InNoRoutes InTruncatedPkts InMcastPkts OutMcastPkts InBcastPkts OutBcastPkts InOctets OutOctets InMcastOctets OutMcastOctets InBcastOctets OutBcastOctets InCsumErrors InNoECTPkts InECT1Pkts InECT0Pkts InCEPkts ReasmOverlaps\nIpExt: 4704 0 23290 4044 5561 6 382998192 85835386 4079167 739351 1945163 468 0 1044598 0 8 0 0\nMPTcpExt: MPCapableSYNRX MPCapableSYNTX MPCapableSYNACKRX MPCapableACKRX MPCapableFallbackACK MPCapableFallbackSYNACK MPCapableEndpAttempt MPFallbackTokenInit MPTCPRetrans MPJoinNoTokenFound MPJoinSynRx MPJoinSynBackupRx MPJoinSynAckRx MPJoinSynAckBackupRx MPJoinSynAckHMacFailure MPJoinAckRx MPJoinAckHMacFailure DSSNotMatching DSSCorruptionFallback DSSCorruptionReset InfiniteMapTx InfiniteMapRx DSSNoMatchTCP DataCsumErr OFOQueueTail OFOQueue OFOMerge NoDSSInWindow DuplicateData AddAddr AddAddrTx AddAddrTxDrop EchoAdd EchoAddTx EchoAddTxDrop PortAdd AddAddrDrop MPJoinPortSynRx MPJoinPortSynAckRx MPJoinPortAckRx MismatchPortSynRx MismatchPortAckRx RmAddr RmAddrDrop RmAddrTx RmAddrTxDrop RmSubflow MPPrioTx MPPrioRx MPFailTx MPFailRx MPFastcloseTx MPFastcloseRx MPRstTx MPRstRx RcvPruned SubflowStale SubflowRecover SndWndShared RcvWndShared RcvWndConflictUpdate RcvWndConflict MPCurrEstab\nMPTcpExt: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0"
  },
  "connections": "Netid State     Recv-Q Send-Q                             Local Address:Port                              Peer Address:Port Process                                                   \nudp   UNCONN    0      0                                     127.0.0.54:53                                     0.0.0.0:*     users:((\"systemd-resolve\",pid=1066,fd=16))               \nudp   UNCONN    0      0                                  127.0.0.53%lo:53                                     0.0.0.0:*     users:((\"systemd-resolve\",pid=1066,fd=14))               \nudp   ESTAB     0      0                            192.168.43.175%wlo1:68                                192.168.43.1:67    users:((\"NetworkManager\",pid=1202,fd=31))                https://chatgpt.com/share/67f62f8b-0338-800d-9ad2-6b338dffbd34\nudp   UNCONN    0      0                                  192.168.8.103:34639                                  0.0.0.0:*     users:((\"ntopng-main\",pid=2404,fd=42))                   \nudp   UNCONN    0      0                                        0.0.0.0:2055                                   0.0.0.0:*     users:((\"nfcapd\",pid=1462,fd=3))                         \nudp   UNCONN    0      0                                    224.0.0.251:5353                                   0.0.0.0:*     users:((\"chrome\",pid=4924,fd=272))                       \nudp   UNCONN    0      0                                    224.0.0.251:5353                                   0.0.0.0:*     users:((\"chrome\",pid=4924,fd=79))                        \nudp   UNCONN    0      0                                        0.0.0.0:5353                                   0.0.0.0:*     users:((\"avahi-daemon\",pid=1135,fd=12))                  \nudp   UNCONN    0      0                                        0.0.0.0:41138                                  0.0.0.0:*     users:((\"ntopng-main\",pid=2404,fd=43))                   \nudp   UNCONN    0      0                                  192.168.8.105:41770                                  0.0.0.0:*     users:((\"ntopng-main\",pid=2404,fd=29))                   \nudp   UNCONN    0      0                                   10.10.100.71:42798                                  0.0.0.0:*     users:((\"ntopng-main\",pid=2404,fd=36))                   \nudp   UNCONN    0      0                                        0.0.0.0:44081                                  0.0.0.0:*     users:((\"avahi-daemon\",pid=1135,fd=14))                  \nudp   UNCONN    0      0                                        0.0.0.0:45108                                  0.0.0.0:*     users:((\"ntopng-main\",pid=2404,fd=30))                   \nudp   UNCONN    0      0                 [fe80::745:44e6:eca9:2d2]%wlo1:546                                       [::]:*     users:((\"NetworkManager\",pid=1202,fd=36))                \nudp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:51022                  [2600:140f:5:989::11a6]:443   users:((\"chrome\",pid=4973,fd=28))                        \nudp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:51462               [2404:6800:4009:822::200a]:443   users:((\"chrome\",pid=4973,fd=53))                        \nudp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:37765               [2404:6800:4002:822::200e]:443   users:((\"chrome\",pid=4973,fd=26))                        \nudp   UNCONN    0      0                                           [::]:5353                                      [::]:*     users:((\"avahi-daemon\",pid=1135,fd=13))                  \nudp   UNCONN    0      0                                           [::]:54835                                     [::]:*     users:((\"avahi-daemon\",pid=1135,fd=15))                  \nudp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:44967               [2404:6800:4002:81e::200a]:443   users:((\"chrome\",pid=4973,fd=48))                        \nudp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:47157               [2404:6800:4009:822::200a]:443   users:((\"chrome\",pid=4973,fd=34))                        \ntcp   LISTEN    0      4096                               127.0.0.53%lo:53                                     0.0.0.0:*     users:((\"systemd-resolve\",pid=1066,fd=15))               \ntcp   LISTEN    0      511                                    127.0.0.1:6379                                   0.0.0.0:*     users:((\"redis-server\",pid=1463,fd=6))                   \ntcp   LISTEN    0      4096                                   127.0.0.1:631                                    0.0.0.0:*     users:((\"cupsd\",pid=92398,fd=7))                         \ntcp   LISTEN    0      1024                                     0.0.0.0:7153                                   0.0.0.0:*     users:((\"ntop-license-ma\",pid=1453,fd=6))                \ntcp   LISTEN    0      4096                                     0.0.0.0:4444                                   0.0.0.0:*     users:((\"ntop-license-ma\",pid=1453,fd=7))                \ntcp   LISTEN    0      4096                                  127.0.0.54:53                                     0.0.0.0:*     users:((\"systemd-resolve\",pid=1066,fd=17))               \ntcp   LISTEN    0      4096                                     0.0.0.0:3000                                   0.0.0.0:*     users:((\"ntopng-main\",pid=2404,fd=46))                   \ntcp   LISTEN    0      100                                      0.0.0.0:25                                     0.0.0.0:*     users:((\"master\",pid=2906,fd=13))                        \ntcp   TIME-WAIT 0      0                                      127.0.0.1:39184                                127.0.0.1:6379                                                           \ntcp   TIME-WAIT 0      0                                      127.0.0.1:39174                                127.0.0.1:6379                                                           \ntcp   ESTAB     0      0                                      127.0.0.1:55482                                127.0.0.1:6379  users:((\"ntopng-main\",pid=2404,fd=23))                   \ntcp   ESTAB     0      0                                      127.0.0.1:6379                                 127.0.0.1:55474 users:((\"redis-server\",pid=1463,fd=8))                   \ntcp   ESTAB     0      0                                 192.168.43.175:39600                            20.189.173.15:443   users:((\"code\",pid=38908,fd=29))                         \ntcp   ESTAB     0      0                                      127.0.0.1:55474                                127.0.0.1:6379  users:((\"ntopng-main\",pid=2404,fd=22))                   \ntcp   TIME-WAIT 0      0                                      127.0.0.1:39162                                127.0.0.1:6379                                                           \ntcp   ESTAB     0      0                                      127.0.0.1:6379                                 127.0.0.1:55482 users:((\"redis-server\",pid=1463,fd=9))                   \ntcp   LISTEN    0      50                                             *:44577                                        *:*     users:((\"java\",pid=6209,fd=127))                         \ntcp   LISTEN    0      50                                             *:9092                                         *:*     users:((\"java\",pid=6210,fd=158))                         \ntcp   LISTEN    0      50                                             *:39039                                        *:*     users:((\"java\",pid=6210,fd=127))                         \ntcp   LISTEN    0      511                                        [::1]:6379                                      [::]:*     users:((\"redis-server\",pid=1463,fd=7))                   \ntcp   LISTEN    0      4096                                       [::1]:631                                       [::]:*     users:((\"cupsd\",pid=92398,fd=6))                         \ntcp   LISTEN    0      50                                             *:2181                                         *:*     users:((\"java\",pid=6209,fd=141))                         \ntcp   LISTEN    0      151                                            *:3306                                         *:*     users:((\"mysqld\",pid=1583,fd=23))                        \ntcp   LISTEN    0      70                                             *:33060                                        *:*     users:((\"mysqld\",pid=1583,fd=21))                        \ntcp   LISTEN    0      4096                                           *:22                                           *:*     users:((\"sshd\",pid=1493,fd=3),(\"systemd\",pid=1,fd=254))  \ntcp   LISTEN    0      100                                         [::]:25                                        [::]:*     users:((\"master\",pid=2906,fd=14))                        \ntcp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:50874               [2404:6800:4009:802::2005]:443   users:((\"chrome\",pid=4973,fd=44))                        \ntcp   ESTAB     0      0                             [::ffff:127.0.0.1]:42778                       [::ffff:127.0.0.1]:2181  users:((\"java\",pid=6210,fd=137))                         \ntcp   ESTAB     0      0                             [::ffff:127.0.0.1]:2181                        [::ffff:127.0.0.1]:42778 users:((\"java\",pid=6209,fd=144))                         \ntcp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:47010                  [2600:140f:5:989::11a6]:443   users:((\"chrome\",pid=4973,fd=30))                        \ntcp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:60256                 [2404:6800:4003:c1a::bc]:5228  users:((\"chrome\",pid=4973,fd=19))                        \ntcp   ESTAB     0      0                          [::ffff:10.10.100.71]:22                       [::ffff:10.10.100.70]:37898 users:((\"sshd\",pid=188025,fd=4),(\"sshd\",pid=187849,fd=4))\ntcp   ESTAB     0      0      [2401:4900:81f1:36ef:2436:1d1e:c31b:a067]:39346 [2606:4700:90d2:7cbc:c2a6:411:5ff2:75c4]:443   users:((\"chrome\",pid=4973,fd=25))",
  "per_ip_conn_count": {
    "127.0.0.1": 4,
    "20.189.173.15": 1,
    "[2404": 2,
    "[": 3,
    "[2600": 1,
    "[2606": 1
  },
  "listening": "Netid State  Recv-Q Send-Q                  Local Address:Port  Peer Address:PortProcess                                                 \nudp   UNCONN 0      0                          127.0.0.54:53         0.0.0.0:*    users:((\"systemd-resolve\",pid=1066,fd=16))             \nudp   UNCONN 0      0                       127.0.0.53%lo:53         0.0.0.0:*    users:((\"systemd-resolve\",pid=1066,fd=14))             \nudp   UNCONN 0      0                       192.168.8.103:34639      0.0.0.0:*    users:((\"ntopng-main\",pid=2404,fd=42))                 \nudp   UNCONN 0      0                             0.0.0.0:2055       0.0.0.0:*    users:((\"nfcapd\",pid=1462,fd=3))                       \nudp   UNCONN 0      0                         224.0.0.251:5353       0.0.0.0:*    users:((\"chrome\",pid=4924,fd=272))                     \nudp   UNCONN 0      0                         224.0.0.251:5353       0.0.0.0:*    users:((\"chrome\",pid=4924,fd=79))                      \nudp   UNCONN 0      0                             0.0.0.0:5353       0.0.0.0:*    users:((\"avahi-daemon\",pid=1135,fd=12))                \nudp   UNCONN 0      0                             0.0.0.0:41138      0.0.0.0:*    users:((\"ntopng-main\",pid=2404,fd=43))                 \nudp   UNCONN 0      0                       192.168.8.105:41770      0.0.0.0:*    users:((\"ntopng-main\",pid=2404,fd=29))                 \nudp   UNCONN 0      0                        10.10.100.71:42798      0.0.0.0:*    users:((\"ntopng-main\",pid=2404,fd=36))                 \nudp   UNCONN 0      0                             0.0.0.0:44081      0.0.0.0:*    users:((\"avahi-daemon\",pid=1135,fd=14))                \nudp   UNCONN 0      0                             0.0.0.0:45108      0.0.0.0:*    users:((\"ntopng-main\",pid=2404,fd=30))                 \nudp   UNCONN 0      0      [fe80::745:44e6:eca9:2d2]%wlo1:546           [::]:*    users:((\"NetworkManager\",pid=1202,fd=36))              \nudp   UNCONN 0      0                                [::]:5353          [::]:*    users:((\"avahi-daemon\",pid=1135,fd=13))                \nudp   UNCONN 0      0                                [::]:54835         [::]:*    users:((\"avahi-daemon\",pid=1135,fd=15))                \ntcp   LISTEN 0      4096                    127.0.0.53%lo:53         0.0.0.0:*    users:((\"systemd-resolve\",pid=1066,fd=15))             \ntcp   LISTEN 0      511                         127.0.0.1:6379       0.0.0.0:*    users:((\"redis-server\",pid=1463,fd=6))                 \ntcp   LISTEN 0      4096                        127.0.0.1:631        0.0.0.0:*    users:((\"cupsd\",pid=92398,fd=7))                       \ntcp   LISTEN 0      1024                          0.0.0.0:7153       0.0.0.0:*    users:((\"ntop-license-ma\",pid=1453,fd=6))              \ntcp   LISTEN 0      4096                          0.0.0.0:4444       0.0.0.0:*    users:((\"ntop-license-ma\",pid=1453,fd=7))              \ntcp   LISTEN 0      4096                       127.0.0.54:53         0.0.0.0:*    users:((\"systemd-resolve\",pid=1066,fd=17))             \ntcp   LISTEN 0      4096                          0.0.0.0:3000       0.0.0.0:*    users:((\"ntopng-main\",pid=2404,fd=46))                 \ntcp   LISTEN 0      100                           0.0.0.0:25         0.0.0.0:*    users:((\"master\",pid=2906,fd=13))                      \ntcp   LISTEN 0      50                                  *:44577            *:*    users:((\"java\",pid=6209,fd=127))                       \ntcp   LISTEN 0      50                                  *:9092             *:*    users:((\"java\",pid=6210,fd=158))                       \ntcp   LISTEN 0      50                                  *:39039            *:*    users:((\"java\",pid=6210,fd=127))                       \ntcp   LISTEN 0      511                             [::1]:6379          [::]:*    users:((\"redis-server\",pid=1463,fd=7))                 \ntcp   LISTEN 0      4096                            [::1]:631           [::]:*    users:((\"cupsd\",pid=92398,fd=6))                       \ntcp   LISTEN 0      50                                  *:2181             *:*    users:((\"java\",pid=6209,fd=141))                       \ntcp   LISTEN 0      151                                 *:3306             *:*    users:((\"mysqld\",pid=1583,fd=23))                      \ntcp   LISTEN 0      70                                  *:33060            *:*    users:((\"mysqld\",pid=1583,fd=21))                      \ntcp   LISTEN 0      4096                                *:22               *:*    users:((\"sshd\",pid=1493,fd=3),(\"systemd\",pid=1,fd=254))\ntcp   LISTEN 0      100                              [::]:25            [::]:*    users:((\"master\",pid=2906,fd=14))",
  "process_conn_count": {
    "systemd(1)": 1,
    "systemd-resolved(1066)": 4,
    "avahi-daemon(1135)": 4,
    "NetworkManager(1202)": 2,
    "ntop-license-manager(1453)": 2,
    "nfcapd(1462)": 1,
    "redis-server(1463)": 4,
    "sshd(1493)": 1,
    "mysqld(1583)": 2,
    "ntopng-main(2404)": 8,
    "master(2906)": 2,
    "chrome(4924)": 2,
    "chrome(4973)": 9,
    "java(6209)": 3,
    "java(6210)": 3,
    "code(38908)": 1,
    "cupsd(92398)": 2,
    "sshd(187849)": 1,
    "sshd(188025)": 1
  },
  "latency": {
    "ping_8_8_8_8": "rtt min/avg/max/mdev = 41.633/47.337/62.540/7.695 ms",
    "ping_gateway": "rtt min/avg/max/mdev = 1.187/3.142/4.031/1.002 ms",
    "trace_8_8_8_8": "",
    "dns_example_com": "; <<>> DiG 9.18.30-0ubuntu0.24.04.2-Ubuntu <<>> +stats example.com\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 64535\n;; flags: qr rd ra; QUERY: 1, ANSWER: 6, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 65494\n;; QUESTION SECTION:\n;example.com.\t\t\tIN\tA\n\n;; ANSWER SECTION:\nexample.com.\t\t74\tIN\tA\t23.192.228.80\nexample.com.\t\t74\tIN\tA\t23.192.228.84\nexample.com.\t\t74\tIN\tA\t23.215.0.136\nexample.com.\t\t74\tIN\tA\t23.215.0.138\nexample.com.\t\t74\tIN\tA\t96.7.128.175\nexample.com.\t\t74\tIN\tA\t96.7.128.198\n\n;; Query time: 344 msec\n;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)\n;; WHEN: Wed Apr 09 12:09:46 IST 2025\n;; MSG SIZE  rcvd: 136"
  },
  "firewall": {
    "iptables": "Chain INPUT (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain FORWARD (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination",
    "nftables": "",
    "conntrack": "tcp      6 357401 ESTABLISHED src=127.0.0.1 dst=127.0.0.1 sport=55474 dport=6379 src=127.0.0.1 dst=127.0.0.1 sport=6379 dport=55474 [ASSURED] mark=0 use=1\ntcp      6 357397 ESTABLISHED src=127.0.0.1 dst=127.0.0.1 sport=42778 dport=2181 src=127.0.0.1 dst=127.0.0.1 sport=2181 dport=42778 [ASSURED] mark=0 use=1"
  },
  "logs": "2025-04-09T11:49:01.646664+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 CRON[192581]: (nimesh) CMD (/home/nimesh/Desktop/NDR/myenv/bin/python3 /home/nimesh/Desktop/NDR/ML/preProcessing.py >> /home/nimesh/Desktop/NDR/cronjob.log 2>&1)\n2025-04-09T11:49:06.830160+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 code.desktop[38861]: [38861:0409/114906.829963:ERROR:atom_cache.cc(230)] Add code/file-list to kAtomsToCache\n2025-04-09T11:49:27.307654+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 PackageKit: daemon quit\n2025-04-09T11:49:27.310945+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 systemd[1]: packagekit.service: Deactivated successfully.\n2025-04-09T11:50:00.314695+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 systemd[1]: Starting sysstat-collect.service - system activity accounting tool...\n2025-04-09T11:50:00.354475+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 systemd[1]: sysstat-collect.service: Deactivated successfully.\n2025-04-09T11:50:00.354535+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 systemd[1]: Finished sysstat-collect.service - system activity accounting tool.\n2025-04-09T11:50:01.451978+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 nfcapd[1462]: Ident: 'none' Flows: 0, Packets: 0, Bytes: 0, Sequence Errors: 0, Bad Packets: 0, Blocks: 0\n2025-04-09T11:50:01.876746+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 CRON[192840]: (nimesh) CMD (/home/nimesh/Desktop/NDR/myenv/bin/python3 /home/nimesh/Desktop/NDR/ML/preProcessing.py >> /home/nimesh/Desktop/NDR/cronjob.log 2>&1)\n2025-04-09T11:50:01.876879+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 CRON[192841]: (root) CMD (/usr/bin/ntopng-utils-manage-updates -a handle-on-demand-requests)\n2025-04-09T11:50:01.877976+05:30 nimesh-ThinkCentre-neo-50t-Gen-3 CRON[192843]: (nimesh) CMD (/usr/local/bin/send_nfcapd.sh >> /var/log/nfcapd_transfer.log 2>&1)",
  "namespaces": {}
};

export default function Index() {
  const [activeTab, setActiveTab] = useState('dashboard');
  const [isLoading, setIsLoading] = useState(true);
  const [networkData, setNetworkData] = useState<NetworkData | null>(null);
  const [sidebarOpen, setSidebarOpen] = useState(true);

  // Simulate loading data from an API
  useEffect(() => {
    const timer = setTimeout(() => {
      setNetworkData(sampleData);
      setIsLoading(false);
    }, 1000);

    return () => clearTimeout(timer);
  }, []);

  // Toggle sidebar
  const toggleSidebar = () => {
    setSidebarOpen(!sidebarOpen);
  };

  // Render appropriate component based on active tab
  const renderComponent = () => {
    if (isLoading || !networkData) {
      return (
        <div className="flex items-center justify-center h-[calc(100vh-4rem)]">
          <div className="flex flex-col items-center">
            <Loader2 className="h-10 w-10 text-primary animate-spin mb-4" />
            <p className="text-muted-foreground">Loading network data...</p>
          </div>
        </div>
      );
    }

    switch (activeTab) {
      case 'dashboard':
        return <Dashboard data={networkData} />;
      case 'interfaces':
        return <NetworkInterfaces data={networkData} />;
      case 'connections':
        return <Connections data={networkData} />;
      case 'processes':
        return <Processes data={networkData} />;
      case 'logs':
        return <Logs data={networkData} />;
      case 'statistics':
      case 'system':
      case 'terminal':
        return (
          <div className="flex items-center justify-center h-[calc(100vh-12rem)]">
            <div className="flex flex-col items-center text-center max-w-md">
              <div className="bg-muted/30 p-6 rounded-full mb-4">
                <Loader2 className="h-10 w-10 text-primary" />
              </div>
              <h3 className="text-xl font-semibold mb-2">Coming Soon</h3>
              <p className="text-muted-foreground">This feature is being developed and will be available in the next update.</p>
            </div>
          </div>
        );
      default:
        return <Dashboard data={networkData} />;
    }
  };

  return (
    <div className="min-h-screen bg-background text-foreground">
      <Navbar hostname={networkData?.hostname || 'Loading...'} toggleSidebar={toggleSidebar} />
      
      <div className="flex">
        <Sidebar 
          activeTab={activeTab} 
          setActiveTab={setActiveTab} 
          isOpen={sidebarOpen}
          toggleSidebar={toggleSidebar}
        />
        
        <main className={`flex-1 transition-all duration-300 p-4 pt-6 ${sidebarOpen ? 'md:ml-60' : 'ml-0'}`}>
          {renderComponent()}
        </main>
      </div>
    </div>
  );
}
